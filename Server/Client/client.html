<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Message Sender</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .log {
            border: 1px solid #ccc;
            padding: 10px;
            height: 200px;
            overflow-y: scroll;
            margin-bottom: 20px;
        }
        button {
            margin-right: 10px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <h1>WebSocket Message Sender</h1>
    
    <div class="log" id="log"></div>

    <!-- 학과별 위치 정보 전송 버튼 -->
    <button onclick="sendLocation('소프트웨어융합대학')">Send Location for 소프트웨어융합대학</button>
    <button onclick="sendLocation('전자정보대학')">Send Location for 전자정보대학</button>
    <button onclick="sendLocation('응용과학대학')">Send Location for 응용과학대학</button>
    <button onclick="sendLocation('체육대학')">Send Location for 체육대학</button>
    <button onclick="sendLocation('공과대학')">Send Location for 공과대학</button>
    <button onclick="sendLocation('예술디자인대학')">Send Location for 예술디자인대학</button>

    <button onclick="generateMonsters()">Generate Random Monsters</button>
    <button onclick="deleteMonsters()"> 몬스터 삭제하기</button>
    <script>
        // WebSocket 연결 설정
        const socket = new WebSocket('ws://localhost:8000');
        
        // 로그 출력 함수
        function logMessage(message) {
            const logDiv = document.getElementById('log');
            logDiv.innerHTML += `<p>${message}</p>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        // WebSocket 연결이 열리면 실행
        socket.onopen = function() {
            logMessage('WebSocket connection opened.');
        };

        // 서버로부터 메시지 수신
        socket.onmessage = function(event) {
            logMessage('Received from server: ' + event.data);
        };

        // WebSocket 연결이 닫힐 때
        socket.onclose = function() {
            logMessage('WebSocket connection closed.');
        };

        // WebSocket 에러 발생 시
        socket.onerror = function(error) {
            logMessage('WebSocket error: ' + error.message);
        };

        // 학과별 좌표 데이터
        const departmentCoordinates = {
            '소프트웨어융합대학': { latitude: 37.239782, longitude: 127.083313 },
            '전자정보대학': { latitude: 37.239782, longitude: 127.083313 },
            '응용과학대학': { latitude: 37.239782, longitude: 127.083313 },
            '체육대학': { latitude: 37.244493, longitude: 127.080436 },
            '공과대학': { latitude: 37.246468, longitude: 127.080844 },
            '예술디자인대학': { latitude: 37.241709, longitude: 127.084441 }
        };

        // 위치 정보 전송 함수
        function sendLocation(department) {
            const location = departmentCoordinates[department];
            if (location) {
                const message = {
                    type: 'location',
                    username: 'testUser',
                    latitude: location.latitude,
                    longitude: location.longitude
                };
                socket.send(JSON.stringify(message));
                logMessage('Sent location for ' + department + ': ' + JSON.stringify(message));
            }
        }

        // 랜덤 몬스터 생성 요청
        function generateMonsters() {
            const message = {
                type: 'generate_monsters',
                count: 1 // 생성할 몬스터 수
            };
            socket.send(JSON.stringify(message));
            logMessage('Requested to generate random monsters: ' + JSON.stringify(message));
        }

        

    </script>

</body>
</html>
